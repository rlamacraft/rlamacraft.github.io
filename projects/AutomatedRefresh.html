<!DOCTYPE html>
<html>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> Automated Refresh | Robert Lamacraft </title>

    <!-- Favicon -->
    <link rel="icon" href="favicon.ico">
    <meta name="theme-color" content="#f5f7f7">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#3CAA9C">

    <!-- Stylesheets -->
    <link href="../css/prism.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">

    <link href='http://fonts.googleapis.com/css?family=Lato:300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:300' rel='stylesheet' type='text/css'>

    <script type="text/javascript" src="../js/dark-theme.js"></script>
</head>

<body>
  <section class="content-section">

    <div class="content-panel intro">
      <a href="/#homepage-content-section" class="btn header link right">More Projects</a>
      <h2> Automated Refresh </h2>
      <h4 class="subtitle">Refreshing Chrome using AppleScript</h4>
    </div>

    <div class="content-panel">
      <p>
        Find me a developer who, when programming, doesn't have two dozen open tabs (typically of the repeating pattern {Google, Stack Overflow}) open when working.
        The problem I find is that one of the those tabs, just one, will be the one in which I'm testing my changes to a webpage. And I'm too damn lazy, so I decided to automate that searching.
      </p>

      <pre class="language-applescript line-numbers"><code class="language-applescript">on run argv
	tell application "Google Chrome"
		activate
		set dev_domain to "http://localhost:" & item 1 of argv & "/"

		set i to 0
		repeat with t in (tabs of (first window))
			set i to i + 1
			if URL of t contains dev_domain then
				set active tab index of first window to i
				tell application "System Events" to keystroke "r" using command down
				return
			end if
		end repeat
		make new tab at end of tabs of first window
		set URL of active tab of first window to dev_domain
	end tell
end run
</code></pre>
    </div>

    <div class="content-panel">
      <p>
        It takes one arg, the port on which the localhost server is running. Then it searches through all of the tabs on the top window (presumably it would also be possible to search through all windows but that's out of scope for what I need)
        and when it finds one with a URL that contains the development domain ("dev_domain") it refreshes the tab. Then, by returning after refreshing it will only create a new tab with the root domain if there isn't an open tab.
        It is assumed that only one tab is open, or rather, the intended tab is the first one. Probably worth using cautiously when playing with the Chrome Dev Tools, although maybe this will break my bad habit of making 30 minutes of changes inside Chrome and then forgetting what I changedâ€¦
      </p>
    </div>

    <div class="content-panel outro">
      <a href="/#homepage-content-section" class="btn header link right">More Projects</a>
    </div>

  </section>

  <script type="text/javascript" src="../js/jquery.min.js"></script>
  <script type="text/javascript" src="../js/prism.js"></script>

</body>
</html>
