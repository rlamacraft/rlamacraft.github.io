<!DOCTYPE html>
<html>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> Spell Checker | Robert Lamacraft </title>

    <!-- Favicon -->
    <link rel="icon" href="favicon.ico">
    <meta name="theme-color" content="#f5f7f7">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#3CAA9C">

    <!-- Stylesheets -->
    <link href="../css/prism.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">

    <link href='http://fonts.googleapis.com/css?family=Lato:300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:300' rel='stylesheet' type='text/css'>

    <script type="text/javascript" src="../js/dark-theme.js"></script>
</head>

<body>
  <section class="content-section">

    <div class="content-panel intro">
      <a target="_blank" href="../demos/SpellChecker" class="btn header link">View Demo</a>
      <a href="/#homepage-content-section" class="btn header link">More Projects</a>
      <h2> Spell Checker, Kinda </h2>
      <h4 class="subtitle">Just some silly little thing.</h4>
    </div>

    <div class="content-panel">
      <p>
        Inspired by <a href="https://www.reddit.com/r/dailyprogrammer/comments/3n55f3/20150930_challenge_234_intermediate_red_squiggles/" target="_blank">this post</a> on <a href="https://www.reddit.com/r/dailyprogrammer" target="_blank">/r/dailyProgrammer</a>, I decided to build a simple spell checker that would take text as a user entered and compare it against a dictionary of words to highlight when a given word was no longer a known word.
        Simply because, for me, hacking together webpages is something I do everyday I stuck to JavaScript (also meant that I could host the result <a href="../demos/SpellChecker/index.html" target="_blank">here</a>).
        After loading the dictionary using a simple jQuery ajax call I took to evaluating an efficient way to search the list of words.
      </p>
      <p>
        The dictionary of words provided by the reddit post is return-separated so <code>dictionary.split("\n")</code> was a simple solution to having an array of all of the words that was conviently sorted alphabetically.
        <i>Binary searching</i> seemed like the obvious way to go from there.
      </p>
      <pre class="language-javascript line-numbers"><code class="language-javascript">var SUCCESS = -2;
var FAIL = -1;

function searchList(term, list) {
  if(list.length == 0)
    return(FAIL);
  var pivotIndex = Math.floor(list.length / 2);
  var pivot = list[pivotIndex];
  if( term.length > 1 ) { // don't bother searching for 0 or 1 letter words
    if(term == pivot.substring(0,term.length)) // if we've found a pivot whose has a prefix that matches the term, then it's in the dictionary!
      return(pivotIndex);
    else {
      if(term < pivot) {
        var newList = list.slice(0, pivotIndex - 1);
        var searchResult = searchList(term, newList);
        if(searchResult >= 0)
          return(searchResult)
        else
          return(FAIL);
      } else {
        var newList = list.slice(pivotIndex + 1);
        var searchResult = searchList(term, newList);
        if( searchResult >= 0 )
          return(pivotIndex + searchResult + 1)
        else
          return(FAIL);
      }
    }
  } else {
    return(SUCCESS); // if not worth search for, then it's assumed to be in the dictionary e.g. all letters in the alphabet have words that start with them
  }
}
</code></pre>
      <p>
        Let me explain.
        So we define two of the possible return states: if we have a success result but we don't have any data to return then -2 and if we have a fail state then -1.
      </p>
      <p>
        This works recurisvely by halving the list eachtime and calling the function again on the resulting list. Because a binary search can search one million records with only 20 comparisons (2<sup>20</sup> = 1,048,576),
        this isn't unmanagable given that the dictionary that we're using only has 172,821 elements.
      </p>
      <ul>
        <li>So, if the list is empty then obviously the term is not in the dictionary so we return fail. Otherwise we find the middle element, hereby known as the pivot.</li>
        <li>We ignore if the term is an empty string or a single character.</li>
        <li>If our search term matches the prefix substring of the pivot of the same length then evidently the search term is indeed in the dictionary, so we return the index of the pivot (more on this below).</li>
        <li>Otherwise, we perform the split.</li>
      </ul>
      <p>
        Then once we have the final value from the root function (-2 or >= 0 for success, else -1 for fail) we simply change the colour of the textfield.
        I tried to just change the word but just changing the colour of one word in &lt;input> looks to not be a simple thing. So moooving on...
      </p>
    </div>

    <div class="content-panel">
      <p>
        Once we have the index of the success point in the dictionary we can find all of the suitable matches and suggest them to the user.
        There's probably a nice way to do this but I simply moved backwards until there was no longer a match and forwards until there was no longer a match to get a range of the possible matches, then output that.
      </p>
      <pre class="language-javascript line-numbers"><code class="language-javascript">function findMatches(index, charCount) {
  var backwards = index;
  while(backwards > -1
    && dictionary[backwards].substring(0,charCount) == dictionary[index].substring(0,charCount))
  {
    --backwards;
  }

  var forwards = index;
  while(forwards < dictionary.length
    && dictionary[forwards].substring(0,charCount) == dictionary[index].substring(0,charCount))
  {
    ++forwards;
  }
  matches = [];
  for(var eachMatch = backwards + 1; eachMatch <= forwards - 1; ++eachMatch)
    matches.push(dictionary[eachMatch]);
  return(matches);
}
</code></pre>
  <p>
    I know, I know. There's probably a better way to do it especially when the search term is only two letters, and hence the number of possible matches is quite large, but it works.
  </p>
  <p>
    And as a proof of concept, I think it works pretty darn well.
  </p>
    </div>

    <div class="content-panel outro">
      <a target="_blank" href="../demos/SpellChecker" class="btn header link">View Demo</a>
      <a href="/#homepage-content-section" class="btn header link">More Projects</a>
    </div>

  </section>

  <script type="text/javascript" src="../js/jquery.min.js"></script>
  <script type="text/javascript" src="../js/prism.js"></script>

</body>
</html>
