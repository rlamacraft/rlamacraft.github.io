// out: ../css/style.css

@import "variables.less";
@import "functions.less";
@import "utilities.less";
@import "project-tags.less";
@import "code.less";

@keyframes gridlist {
  0% {
    opacity: 1;
  }
  30% {
    opacity: 0;
    transform: translateY(20px);
  }
  60% {
    opacity: 0;
  }
  100% {
    opacity: 1;
    transform: translateY(0px);
  }
}

@keyframes bounce {
    0%, 5%, 12.5%, 20%, 25%, 30%, 37.5%, 45%, 50%, 55%, 62.5%, 70%, 75%, 80%, 87.5%, 95%, 100% {
        -webkit-transform: translateY(0) rotate(-0deg);
                transform: translateY(0) rotate(-0deg);
    }
    10%, 60%, 85% {
        -webkit-transform: translateY(-10px) rotate(-0deg);
                transform: translateY(-10px) rotate(-0deg);
    }
    15%, 40%, 65%, 90% {
        -webkit-transform: translateY(-5px) rotate(-0deg);
                transform: translateY(-5px) rotate(-0deg);
    }
    35% {
        -webkit-transform: translateY(-10px) rotateY(-90deg);
                transform: translateY(-10px) rotateY(-90deg);
    }
}

*, *:before, *:after {
  box-sizing: border-box;
}

html, body {
  overflow: initial !important; // allows scrolling once linked styles have loaded
}

body {
  margin: @spacing-xsmall @spacing-big;
  background-color: @colour-base;

  @media(@non-sm) {
    margin: @spacing-body-top-padding @spacing-body-side-padding;
  }
}

a {
  .transition;
  text-decoration: none;
  color: @font-colour-accent;
  font-weight: 500;
}

a:hover, a:focus {
  text-decoration: none;
  color: @colour-accent-light;
  outline: none;
}

h1, h2, h3, h4, h5, h6 {
  margin: 0;

  .heading-font(
    @size: @font-size-heading,
  );
}

h1>a, h2>a, h3>a, h4>a, h5>a, h6>a {
  text-decoration: none !important;
}

h1, html #homepage-intro h1 {
  .heading-font(
      @size:        @font-size-large,
      @transform:   @font-transform-uppercase,
      @line-height: @font-lineheight-less,
  );
}

h2 {
  .heading-font(
      @size:          @font-size-heading,
  );
  margin-bottom: @spacing-xsmall-em;
  text-transform: capitalize;;
}

h3, h4 {
  .heading-font(
      @size:          @font-size-subheading
  );
  padding-top: @spacing-xsmall-em;
  padding-bottom: @spacing-small-em;

  @media(@lg) {
    padding-top: @spacing-small-em;
  }
}

h4.subtitle {
  font-size: 1.2em;
  color: @font-colour-subheading;
  font-family: @font-family-standard;
}

p, li {
  margin: 0 0 @spacing-standard-em;
  .font();
}

svg#scroll-down{
  opacity: 1 !important;
  .transition;
  animation: bounce 10s infinite;
  margin-top: 12em;

  &:hover {
    cursor: pointer;

    polyline {
      stroke: @colour-accent-light;
    }
  }

  polyline {
    .transition;
    fill:none;
    stroke:@colour-accent;
    stroke-width:3
  }
}

.content-section {

  @media(@lg) {
    box-shadow: @shadow-card;
    border-radius: @border-radius;
    background-color: @colour-section-alt;
    padding: 0 @spacing-small @spacing-small @spacing-small;
    width: @size-centre-column;
    margin: auto;
  }

  .content-panel {
    .transition();
    z-index: 100;
    border-bottom: @border-standard-thin;
    padding: @spacing-standard @spacing-xsmall;

    &.intro, &.outro {
      border-bottom: @border-standard-thin;
      padding-bottom: @spacing-xsmall;
      min-height: 0;
      width: @size-full;

      @media(@non-xs) {
        min-height: 0;
        height: @size-header-height-standard;
      }

      &.demo {
        background-color: @colour-base;
      }
    }

    &.outro {
      display: flex;
      flex-direction: row-reverse;

      a.btn {
        float: initial;
        margin-bottom: 0;
      }
    }

    &.outro {
      .btn.header.link {
        margin-top: 0;
      }
    }

    &:last-child {
      border: none;
    }

    > div.half-column {
      display: inline-block;
      width: calc(50% - 2px);
    }
  }
}

.btn, button {
  .rounded-corners;
  .transition(@transition-btn);
  .font(
    @family:       @font-family-base,
    @colour:       @font-colour-button,
    @size:         @font-size-interactable-standard,
    @line-height:  @font-lineheight-btn,
    @weight:       @font-weight-bold,
  );
  padding: @spacing-small-em @spacing-standard-em;
  background-color: @colour-accent;
  cursor: pointer;
  border: none;
  margin-right: 1em;

  &.link {
    color: @font-colour-accent;
    background-color: transparent;
    display: inline-block;
    border: none;
    text-transform: uppercase;
    padding-left: 0;
    padding-right: @spacing-link-underline-overhang;
    transform: translateY(0%) !important; /* don't ask */

    &:after {
      content: '';
      width: 0%;
      height: 1px;
      background-color: @colour-accent-light;
      display: block;
      position: absolute;
      margin: 0;
      transition: @transition-btn;
    }

    &.right {
      padding-left: @spacing-link-underline-overhang;
      padding-right: 0;

      &:after {
        right: 0;
      }
    }

    &:hover {
      color: @colour-accent-light;
      background-color: transparent;
    }
    &:hover:after, &:focus:after {
      width: 100%;
    }
  }

  &.header {
    font-size: @font-size-standard;
    display: inline-block;
    width: @size-intro-button-width;
    max-width: @size-half;
    font-family: @font-family-base;

    &.link {
      border: @border-btn-link;
      width: 100%;
      float: right;

      width: auto;
      margin: @spacing-xsmall;

      &:hover, &:focus, &:active {
        background: transparent;
        color: @colour-accent-light;
      }
    }
  }

  polyline {
    .transition();
  }

  &:hover, &:focus, &.selected {
    .ignore-default-focus;
    background-color: @colour-accent-light;
    text-decoration: none;
    outline: none;
    color: @font-colour-button;

    polyline.stroke {
      stroke: @colour-base !important;
    }

    polyline.fill {
      fill: @colour-base !important;
    }
  }
}

.input-group:focus {
  .ignore-default-focus;
}

.focus-underline:after {
  content: '';
	display: block;
	margin: auto;
	height: @border-width;
	width: 0px;
	background: transparent;
	transition: @transition-focus-underline;
  position: relative;
  margin-top: -1px;
  z-index: @z-focus-underline;
}

.focus-underline.focused:after {
  width: @size-full;
  background: @colour-accent;
}

.input-group-addon {
  .font(
      @size: @font-size-no-effect,
      @line-height: @font-lineheight-less,
      @weight: @font-weight-bold,
  );
  .rounded-corners(0);
  border: @border-standard-thin;
  border-left: none;
  border-top: none;
  background-color: transparent;

  &.degree-module-initialism {
      min-width: @kcl-calc-degree-module-initialism-width;
  }
}

input.form-control {
  .font(
      @size: @font-size-no-effect,
  );
  .shadow(none);
  .rounded-corners(0);
  background-color: transparent;
  border: @border-standard-thin;
  border-right: none;
  border-top: none;

  &:focus {
    .ignore-default-focus;
    .shadow(none);
    border-left: @border-accent;
    border-bottom-color: @colour-thin-border;
  }
}

.switch {
  position: relative;
  height: 3em;
  width: ~"calc(9em + 2px)";
  background: rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  -webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);
  display: inline-block;
  float: right;
  margin-right: 10px;
  .font();
}

.switch-label {
  position: relative;
  z-index: 2;
  float: left;
  width: ~"calc(4.5em + 1px)";
  line-height: 3;
  font-size: @font-size-interactable-standard;
  color: @font-colour-subheading;
  text-align: center;
  cursor: pointer;
  letter-spacing: 0.05em;
  font-family: @font-family-base;
}

.switch-input {
  display: none;
}

.switch-input:checked + .switch-label {
  color: @colour-base;
  -webkit-transition: 0.15s ease-out;
  -moz-transition: 0.15s ease-out;
  -o-transition: 0.15s ease-out;
  transition: 0.15s ease-out;
  cursor: default;
}

.switch-input:checked + .switch-label-on ~ .switch-selection {
  /* Note: left: 50% doesn't transition in WebKit */
  left: 4.5em;
}

/* the green bubble */
.switch-selection {
  display: block;
  position: absolute;
  z-index: 1;
  top: 2px;
  left: 2px;
  width: 4.5em;
  height: 2.7em;
  background: @colour-accent;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 1px rgba(255, 255, 255, 0.5), 0 0 2px rgba(0, 0, 0, 0.2);
  box-shadow: inset 0 1px rgba(255, 255, 255, 0.5), 0 0 2px rgba(0, 0, 0, 0.2);
  -webkit-transition: left 0.15s ease-out;
  -moz-transition: left 0.15s ease-out;
  -o-transition: left 0.15s ease-out;
  transition: left 0.15s ease-out;
}

#projects-container, #posts-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  animation-duration: 1s;
  animation-timing-function: linear;

  article {
    .space-top;
    padding: @spacing-big;
    margin: @spacing-xsmall;
    flex-grow: 1;
    flex-basis: auto;
    position: relative;
    overflow: hidden;
    animation-duration: 1s;
    animation-timing-function: linear;
    border-radius: @border-radius;
    box-shadow: @shadow-card;
    background-color: @colour-section-alt;

    &.project {
      height: 66px;
      text-align: center;
      padding: 0;
    }

    &.post {
      padding: @spacing-small @spacing-big;
    }

    .title {
      .transition();
      display: block;
      color: @font-colour-heading;
      font-size: @font-size-project;
      font-family: @font-family-title;
      text-transform: capitalize;
      letter-spacing: 0.025em;
      padding-top: @spacing-small-em;
    }

    .subtitle {
      display: block;
      color: @font-colour-subheading;
      font-family: @font-family-subheading;
    }

    .background {
      .transition;
      padding: 0 30px;
    }

    .overlay {
      .overlay-buttons {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        z-index: 250;
        text-align: left;
        padding: 0 @font-size-interactable-standard;

        .btn {
          transform: translateY(-100%);
          opacity: 0;
          .transition;
          background-color: transparent;
          display: inline-block;
          border: none;
          color: @colour-base-subdued;
          text-transform: uppercase;
          font-size: @font-size-standard;

          &:hover, &:focus {
            color: @colour-base;
          }

          &:after {
            position: absolute;
            margin: 0;
            background-color: @colour-base;
          }

        }

        .btn + .btn {
          margin-left: 0;
        }
      }

      .project-tags {
        margin-top: -65px;
        bottom: 0;
        left: 0;
        right: 0;

        display: flex;
        justify-content: flex-end;

        .project-tag {
          .transition();
          .font(
            @size: @font-size-projecttag,
          );
          height: 100%;
          transition: all .3s cubic-bezier(0.18, 0.89, 0.29, 1.21);
          will-change: transform;

          transform: translateY(0%);
          text-align: right;
          padding: 0 10px;
          padding-top: @spacing-big;

          &:after {
            right: 6px;
            bottom: 0px;
            color: @colour-base;
            font-size: @font-size-tag;
            line-height: @font-lineheight-tag;
          }

          &:nth-child(1) {
            transition-delay: .1s;
            z-index: 120;

            flex-grow: 1;
            min-width: 225px; /* to give enough space for 2 links */
          }

          &:nth-child(2) {
            transition-delay: .15s;
            z-index: 115;
          }

          &:nth-child(3) {
            transition-delay: .2s;
            z-index: 110;
          }

          &:nth-child(4) {
            transition-delay: .25s;
            z-index: 105;
          }

          &:nth-child(5) {
            transition-delay: .3s;
            z-index: 100;
          }
        }
      }
    }

    &.project {
      &.hover, &:hover {
        .background {
          -webkit-filter: blur(3px);
        }

        .overlay {
          .overlay-buttons {
            .btn {
              transform: translateY(0%) !important;
              opacity: 1;

              &:nth-child(1) {
                transition-delay: 0.1s;
              }

              &:nth-child(2) {
                transition-delay: 0.15s;
              }
            }
          }

          .project-tag {
            transform: translateY(44px) !important;
          }
        }
      }
    }
  }

  .buttons {
    padding-top: @spacing-small;
  }

  &.list {
    padding-top: 2em;
    margin: auto;

    article {
      flex-basis: 50%;
    }
  }
}

code .tag, pre .tag {
  font-family: @font-family-code;
  font-size: inherit;
  padding: inherit;
  vertical-align: inherit;
  display: inherit;
}

.anchor {
  position: absolute;
  margin-top: @anchor-offset;
}

figure.image-wrapper {
  .rounded-corners;
  border: @border-image;
  overflow: hidden;
  position: relative;
  background-color: @colour-section-alt;
  min-width: 220px;
  max-width: 310px;
  max-height: 220px;
  text-align: center;

  &.left {
    float: left;
    margin-left: 0;
    margin-right: 10px;
  }

  &.right {
    float: right;
    margin-right: 0;
    margin-left: 10px;
  }

  &.fixedwidth {
    width: 200px;
  }

  &.fixedheight {
    height: 200px;
  }

  &.withcaption {
    p {
      margin: 0;
      position: absolute;
      width: @size-full;
      left: 0;
      opacity: 0;
      padding: 10px 30px;
      font-size: 1.2em;
      font-weight: @font-weight-bold;

      &.top {
        bottom: @size-half;
        .transform(~"translate3d(0%, 100%, 0)")
      }

      &.bottom {
        top: @size-half;
        .transform(~"translate3d(0%, -100%, 0)")
      }
    }

    &:hover {
      img {
        opacity: 0.3;
        .filter(~"grayscale(100%)");
        .transform(~"scale(1.1)");
      }

      figcaption p {
        .transform(~"translate3d(0%, 0%, 0)");
        opacity: 0.8;
      }
    }
  }

  * {
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    .transition();
  }

  img {
    opacity: 1.0;
    width: 100%;
    .transition();
  }

  figcaption {
    position: absolute;
    bottom: 0;
    left: 0;
    width: @size-full;
    height: @size-full;
    .font(
        @size: 1em
    );
  }
}

span.subtitle {
  .font(
    @transform: capitalize;
    @letter-spacing: 0.03em;
    @line-height: @font-lineheight-less;
    @size: @font-size-project / 2;
  );
}

hr {
  margin-top: @spacing-big;
  margin-bottom: @spacing-big;
  border: @border-standard-thin;
}

iframe {
  border-radius: @border-radius;
  border: @border-image;
}

.pull-right {
  float: right;
}

.pull-left {
  float: left;
}

.prism-show-language-label {
    font-family: @font-family-subheading;
    padding: @spacing-xsmall-em @spacing-small-em !important;
}

html.dark-theme {
  background-color: @colour-dark-theme;

  body {
    background-color: @colour-dark-theme;
  }

  h1, h2, h3, h4, #homepage-intro h1 {
    color: @font-colour-heading-dark;
  }

  a.btn.header:hover {
    color: @colour-dark-theme;

    &.link {
      color: @colour-accent-light;
    }
  }

  .content-section {
    @media(@lg) {
      background-color: @colour-dark-theme-alt;
    }
  }

  .content-section#homepage-content-section {
    background-color: @colour-dark-theme;
  }

  .content-section#homepage-content-section .content-panel > h3 {
    background-color: @colour-dark-theme;
  }

  p, li {
    color: @colour-dark-theme-font;
  }

  #projects-container article.project, #posts-container article.post {
    background-color: @colour-dark-theme-alt;

    .title {
      color: @font-colour-heading-dark
    }
  }
}
